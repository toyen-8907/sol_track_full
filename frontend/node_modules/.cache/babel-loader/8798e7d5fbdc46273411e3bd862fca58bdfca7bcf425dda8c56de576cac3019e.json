{"ast":null,"code":"var _s = $RefreshSig$();\n// WebSocketComponent.js\n\nimport React, { useEffect } from 'react';\nconst WebSocketComponent = ({\n  accounts = [],\n  account,\n  onSolBalanceReceived,\n  onSPLBalancesReceived\n}) => {\n  _s();\n  useEffect(() => {\n    const ws = new WebSocket('ws://localhost:5001/ws');\n    ws.onopen = () => {\n      console.log('WebSocket 已連接');\n\n      // 合併單個帳戶和多個帳戶\n      let allAccounts = [];\n      if (account) {\n        allAccounts.push(account);\n      }\n      if (accounts.length > 0) {\n        allAccounts = allAccounts.concat(accounts);\n      }\n\n      // 訂閱所有帳號地址\n      allAccounts.forEach(acc => {\n        ws.send(JSON.stringify({\n          action: 'subscribe',\n          account: acc\n        }));\n      });\n    };\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'solBalance') {\n        onSolBalanceReceived(data.account, parseFloat(data.balance));\n      } else if (data.type === 'splBalances') {\n        onSPLBalancesReceived && onSPLBalancesReceived(data.account, data.balances);\n      }\n    };\n    ws.onclose = () => {\n      console.log('WebSocket 已斷開');\n    };\n    return () => {\n      ws.close();\n    };\n  }, [accounts, account, onSolBalanceReceived, onSPLBalancesReceived]);\n  return null;\n};\n_s(WebSocketComponent, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = WebSocketComponent;\nexport default WebSocketComponent;\nvar _c;\n$RefreshReg$(_c, \"WebSocketComponent\");","map":{"version":3,"names":["React","useEffect","WebSocketComponent","accounts","account","onSolBalanceReceived","onSPLBalancesReceived","_s","ws","WebSocket","onopen","console","log","allAccounts","push","length","concat","forEach","acc","send","JSON","stringify","action","onmessage","event","data","parse","type","parseFloat","balance","balances","onclose","close","_c","$RefreshReg$"],"sources":["/Users/damentp01/project/sol_track_full/frontend/src/WebSocketComponent.js"],"sourcesContent":["// WebSocketComponent.js\n\nimport React, { useEffect } from 'react';\n\nconst WebSocketComponent = ({ accounts = [], account, onSolBalanceReceived, onSPLBalancesReceived }) => {\n  useEffect(() => {\n    const ws = new WebSocket('ws://localhost:5001/ws');\n\n    ws.onopen = () => {\n      console.log('WebSocket 已連接');\n\n      // 合併單個帳戶和多個帳戶\n      let allAccounts = [];\n\n      if (account) {\n        allAccounts.push(account);\n      }\n\n      if (accounts.length > 0) {\n        allAccounts = allAccounts.concat(accounts);\n      }\n\n      // 訂閱所有帳號地址\n      allAccounts.forEach(acc => {\n        ws.send(JSON.stringify({ action: 'subscribe', account: acc }));\n      });\n    };\n\n    ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'solBalance') {\n        onSolBalanceReceived(data.account, parseFloat(data.balance));\n      } else if (data.type === 'splBalances') {\n        onSPLBalancesReceived && onSPLBalancesReceived(data.account, data.balances);\n      }\n    };\n\n    ws.onclose = () => {\n      console.log('WebSocket 已斷開');\n    };\n\n    return () => {\n      ws.close();\n    };\n  }, [accounts, account, onSolBalanceReceived, onSPLBalancesReceived]);\n\n  return null;\n};\n\nexport default WebSocketComponent;\n"],"mappings":";AAAA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAExC,MAAMC,kBAAkB,GAAGA,CAAC;EAAEC,QAAQ,GAAG,EAAE;EAAEC,OAAO;EAAEC,oBAAoB;EAAEC;AAAsB,CAAC,KAAK;EAAAC,EAAA;EACtGN,SAAS,CAAC,MAAM;IACd,MAAMO,EAAE,GAAG,IAAIC,SAAS,CAAC,wBAAwB,CAAC;IAElDD,EAAE,CAACE,MAAM,GAAG,MAAM;MAChBC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;;MAE5B;MACA,IAAIC,WAAW,GAAG,EAAE;MAEpB,IAAIT,OAAO,EAAE;QACXS,WAAW,CAACC,IAAI,CAACV,OAAO,CAAC;MAC3B;MAEA,IAAID,QAAQ,CAACY,MAAM,GAAG,CAAC,EAAE;QACvBF,WAAW,GAAGA,WAAW,CAACG,MAAM,CAACb,QAAQ,CAAC;MAC5C;;MAEA;MACAU,WAAW,CAACI,OAAO,CAACC,GAAG,IAAI;QACzBV,EAAE,CAACW,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;UAAEC,MAAM,EAAE,WAAW;UAAElB,OAAO,EAAEc;QAAI,CAAC,CAAC,CAAC;MAChE,CAAC,CAAC;IACJ,CAAC;IAEDV,EAAE,CAACe,SAAS,GAAIC,KAAK,IAAK;MACxB,MAAMC,IAAI,GAAGL,IAAI,CAACM,KAAK,CAACF,KAAK,CAACC,IAAI,CAAC;MACnC,IAAIA,IAAI,CAACE,IAAI,KAAK,YAAY,EAAE;QAC9BtB,oBAAoB,CAACoB,IAAI,CAACrB,OAAO,EAAEwB,UAAU,CAACH,IAAI,CAACI,OAAO,CAAC,CAAC;MAC9D,CAAC,MAAM,IAAIJ,IAAI,CAACE,IAAI,KAAK,aAAa,EAAE;QACtCrB,qBAAqB,IAAIA,qBAAqB,CAACmB,IAAI,CAACrB,OAAO,EAAEqB,IAAI,CAACK,QAAQ,CAAC;MAC7E;IACF,CAAC;IAEDtB,EAAE,CAACuB,OAAO,GAAG,MAAM;MACjBpB,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED,OAAO,MAAM;MACXJ,EAAE,CAACwB,KAAK,CAAC,CAAC;IACZ,CAAC;EACH,CAAC,EAAE,CAAC7B,QAAQ,EAAEC,OAAO,EAAEC,oBAAoB,EAAEC,qBAAqB,CAAC,CAAC;EAEpE,OAAO,IAAI;AACb,CAAC;AAACC,EAAA,CA3CIL,kBAAkB;AAAA+B,EAAA,GAAlB/B,kBAAkB;AA6CxB,eAAeA,kBAAkB;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}