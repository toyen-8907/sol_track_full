{"ast":null,"code":"var _jsxFileName = \"/Users/damentp01/project/sol_track_full/frontend/src/Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './App.css';\nimport WebSocketComponent from './WebSocketComponent';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const [accounts, setAccounts] = useState([\"GShiMwUiqpWfxyVxVnYo96upwQekeFVNrtMQT4aSH2RT\", \"CRVidEDtEUTYZisCxBZkpELzhQc9eauMLR3FWg74tReL\"]);\n  const navigate = useNavigate();\n\n  // 修改 balances 狀態結構，包含 current 和 previous\n  const [balances, setBalances] = useState({});\n  const [newAddress, setNewAddress] = useState('');\n\n  // 從後端獲取初始餘額\n  useEffect(() => {\n    const fetchBalances = async () => {\n      try {\n        for (const account of accounts) {\n          const solResponse = await fetch(`/solBalance/${account}`);\n          const solData = await solResponse.json();\n          setBalances(prev => {\n            var _prev$account;\n            const prevBalance = ((_prev$account = prev[account]) === null || _prev$account === void 0 ? void 0 : _prev$account.current) || 0;\n            return {\n              ...prev,\n              [account]: {\n                current: solData.balance,\n                previous: prevBalance\n              }\n            };\n          });\n        }\n      } catch (error) {\n        console.error('取得初始餘額時出錯:', error);\n      }\n    };\n    fetchBalances();\n  }, [accounts]);\n\n  // 處理 WebSocket 接收到新的餘額更新\n  const handleSolBalanceReceived = useCallback((account, newBalance) => {\n    setBalances(prev => {\n      var _prev$account2;\n      const prevBalance = ((_prev$account2 = prev[account]) === null || _prev$account2 === void 0 ? void 0 : _prev$account2.current) || 0;\n      return {\n        ...prev,\n        [account]: {\n          current: newBalance,\n          previous: prevBalance\n        }\n      };\n    });\n  }, []);\n\n  // 處理新增錢包地址\n  const handleAddAccount = () => {\n    if (newAddress && !accounts.includes(newAddress)) {\n      setAccounts([...accounts, newAddress]);\n      setNewAddress('');\n    }\n  };\n\n  // 計算百分比變化\n  const calculatePercentageChange = (previous, current) => {\n    if (previous === 0) return 'N/A';\n    const change = (current - previous) / previous * 100;\n    return change.toFixed(2);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container\",\n    children: [/*#__PURE__*/_jsxDEV(WebSocketComponent, {\n      onSolBalanceReceived: handleSolBalanceReceived\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-side\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"add-account\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\u8F38\\u5165\\u65B0\\u7684\\u9322\\u5305\\u5730\\u5740\",\n          value: newAddress,\n          onChange: e => setNewAddress(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddAccount,\n          children: \"\\u65B0\\u589E\\u9322\\u5305\\u5730\\u5740\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wallet-overview\",\n        children: accounts.map(account => {\n          const accountData = balances[account] || {};\n          const currentBalance = accountData.current || 0;\n          const previousBalance = accountData.previous || 0;\n          const percentageChange = calculatePercentageChange(previousBalance, currentBalance);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"wallet-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              onClick: () => navigate(`/wallet/${account}`),\n              style: {\n                cursor: 'pointer'\n              },\n              children: account\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u9918\\u984D: \", currentBalance, \" $SOL\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u4E0A\\u6B21\\u66F4\\u65B0\\u524D\\u7684\\u9918\\u984D: \", previousBalance, \" $SOL\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"\\u5E33\\u6236\\u8B8A\\u52D5\\uFF1A \", percentageChange, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this)]\n          }, account, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right-side\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u8CB7\\u5165\\u4EE3\\u5E63\\u529F\\u80FD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"nPJgTCeqvkP4YSR8QFo9G9ljj1Q=\", false, function () {\n  return [useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","useRef","useNavigate","WebSocketComponent","jsxDEV","_jsxDEV","Home","_s","accounts","setAccounts","navigate","balances","setBalances","newAddress","setNewAddress","fetchBalances","account","solResponse","fetch","solData","json","prev","_prev$account","prevBalance","current","balance","previous","error","console","handleSolBalanceReceived","newBalance","_prev$account2","handleAddAccount","includes","calculatePercentageChange","change","toFixed","className","children","onSolBalanceReceived","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","map","accountData","currentBalance","previousBalance","percentageChange","style","cursor","_c","$RefreshReg$"],"sources":["/Users/damentp01/project/sol_track_full/frontend/src/Home.js"],"sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './App.css';\nimport WebSocketComponent from './WebSocketComponent';\n\nconst Home = () => {\n  const [accounts, setAccounts] = useState([\n    \"GShiMwUiqpWfxyVxVnYo96upwQekeFVNrtMQT4aSH2RT\",\n    \"CRVidEDtEUTYZisCxBZkpELzhQc9eauMLR3FWg74tReL\",\n  ]);\n  const navigate = useNavigate();\n\n  // 修改 balances 狀態結構，包含 current 和 previous\n  const [balances, setBalances] = useState({});\n\n  const [newAddress, setNewAddress] = useState('');\n\n  // 從後端獲取初始餘額\n  useEffect(() => {\n    const fetchBalances = async () => {\n      try {\n        for (const account of accounts) {\n          const solResponse = await fetch(`/solBalance/${account}`);\n          const solData = await solResponse.json();\n\n          setBalances(prev => {\n            const prevBalance = prev[account]?.current || 0;\n            return {\n              ...prev,\n              [account]: {\n                current: solData.balance,\n                previous: prevBalance,\n              },\n            };\n          });\n        }\n      } catch (error) {\n        console.error('取得初始餘額時出錯:', error);\n      }\n    };\n\n    fetchBalances();\n  }, [accounts]);\n\n  // 處理 WebSocket 接收到新的餘額更新\n  const handleSolBalanceReceived = useCallback((account, newBalance) => {\n    setBalances(prev => {\n      const prevBalance = prev[account]?.current || 0;\n      return {\n        ...prev,\n        [account]: {\n          current: newBalance,\n          previous: prevBalance,\n        },\n      };\n    });\n  }, []);\n\n  // 處理新增錢包地址\n  const handleAddAccount = () => {\n    if (newAddress && !accounts.includes(newAddress)) {\n      setAccounts([...accounts, newAddress]);\n      setNewAddress('');\n    }\n  };\n\n  // 計算百分比變化\n  const calculatePercentageChange = (previous, current) => {\n    if (previous === 0) return 'N/A';\n    const change = ((current - previous) / previous) * 100;\n    return change.toFixed(2);\n  };\n\n  return (\n    <div className=\"home-container\">\n      <WebSocketComponent\n        onSolBalanceReceived={handleSolBalanceReceived}\n      />\n\n      {/* 左側：錢包總覽和新增地址 */}\n      <div className=\"left-side\">\n        <div className=\"add-account\">\n          <input\n            type=\"text\"\n            placeholder=\"輸入新的錢包地址\"\n            value={newAddress}\n            onChange={(e) => setNewAddress(e.target.value)}\n          />\n          <button onClick={handleAddAccount}>新增錢包地址</button>\n        </div>\n\n        <div className=\"wallet-overview\">\n          {accounts.map(account => {\n            const accountData = balances[account] || {};\n            const currentBalance = accountData.current || 0;\n            const previousBalance = accountData.previous || 0;\n            const percentageChange = calculatePercentageChange(previousBalance, currentBalance);\n\n            return (\n              <div key={account} className=\"wallet-item\">\n                {/* 點擊錢包地址，導航到詳細頁面 */}\n                <h3\n                  onClick={() => navigate(`/wallet/${account}`)}\n                  style={{ cursor: 'pointer' }}\n                >\n                  {account}\n                </h3>\n                <p>餘額: {currentBalance} $SOL</p>\n                <p>上次更新前的餘額: {previousBalance} $SOL</p>\n                <h4>帳戶變動： {percentageChange}%</h4>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* 右側：買入代幣功能區域 */}\n      <div className=\"right-side\">\n        <h3>買入代幣功能</h3>\n        {/* 在此處添加您的買入代幣相關組件或代碼 */}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}