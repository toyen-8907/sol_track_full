{"ast":null,"code":"// App.js\nimport React,{useState,useCallback,useEffect}from'react';import'./App.css';import WebSocketComponent from'./WebSocketComponent';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[solBalance,setSolBalance]=useState(null);const[previousBalance,setPreviousBalance]=useState(null);const[percentageChange,setPercentageChange]=useState(null);const[splBalances,setSplBalances]=useState([]);// 要监控的账户地址\nconst account=\"GShiMwUiqpWfxyVxVnYo96upwQekeFVNrtMQT4aSH2RT\";// 从后端获取初始余额\nuseEffect(()=>{const fetchBalances=async()=>{try{const solResponse=await fetch(`/solBalance/${account}`);const solData=await solResponse.json();setSolBalance(solData.balance);setPreviousBalance(solData.balance);const splResponse=await fetch(`/splBalances/${account}`);const splData=await splResponse.json();setSplBalances(splData.filter(token=>parseFloat(token.balance)>0));}catch(error){console.error('获取初始余额时出错:',error);}};fetchBalances();},[account]);// 处理从 WebSocket 接收到的新 SOL 余额\nconst handleSolBalanceReceived=useCallback(balance=>{if(previousBalance!==null){const change=(balance-previousBalance)/previousBalance*100;setPercentageChange(change.toFixed(2));}setPreviousBalance(balance);setSolBalance(balance);},[previousBalance]);// 处理从 WebSocket 接收到的新的 SPL 代币余额\nconst handleSPLBalancesReceived=useCallback(balances=>{const nonZeroBalances=balances.filter(token=>parseFloat(token.balance)>0);setSplBalances(nonZeroBalances);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Solana \\u5E33\\u6236\\u76E3\\u63A7\"})}),/*#__PURE__*/_jsx(WebSocketComponent,{account:account,onSolBalanceReceived:handleSolBalanceReceived,onSPLBalancesReceived:handleSPLBalancesReceived}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-co\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[account,\":\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-bottom-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard_left\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u4F59\\u989D: \",solBalance,\" $SOL\"]}),percentageChange!==null&&/*#__PURE__*/_jsxs(\"h4\",{style:{color:percentageChange>0?'green':'red'},children:[\"\\u6DA8\\u8DCC: \",percentageChange,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard_right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"token-grid\",children:splBalances.map((token,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"token-item\",onClick:()=>navigator.clipboard.writeText(token.mint),children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"TOKEN \\u5408\\u7EA6\\u5730\\u5740: \",token.mint.slice(0,7),\"...\",token.mint.slice(-7)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u94B1\\u5305\\u4F59\\u989D: \",parseFloat(token.balance).toFixed(4)]})]},index))})})]})]})]});};export default App;","map":{"version":3,"names":["React","useState","useCallback","useEffect","WebSocketComponent","jsx","_jsx","jsxs","_jsxs","App","solBalance","setSolBalance","previousBalance","setPreviousBalance","percentageChange","setPercentageChange","splBalances","setSplBalances","account","fetchBalances","solResponse","fetch","solData","json","balance","splResponse","splData","filter","token","parseFloat","error","console","handleSolBalanceReceived","change","toFixed","handleSPLBalancesReceived","balances","nonZeroBalances","className","children","onSolBalanceReceived","onSPLBalancesReceived","style","color","map","index","onClick","navigator","clipboard","writeText","mint","slice"],"sources":["C:/project/sol_track/sol_track_full/frontend/src/App.js"],"sourcesContent":["// App.js\r\n\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport './App.css';\r\nimport WebSocketComponent from './WebSocketComponent';\r\n\r\nconst App = () => {\r\n  const [solBalance, setSolBalance] = useState(null);\r\n  const [previousBalance, setPreviousBalance] = useState(null);\r\n  const [percentageChange, setPercentageChange] = useState(null);\r\n  const [splBalances, setSplBalances] = useState([]);\r\n\r\n  // 要监控的账户地址\r\n  const account = \"GShiMwUiqpWfxyVxVnYo96upwQekeFVNrtMQT4aSH2RT\";\r\n\r\n  // 从后端获取初始余额\r\n  useEffect(() => {\r\n    const fetchBalances = async () => {\r\n      try {\r\n        const solResponse = await fetch(`/solBalance/${account}`);\r\n        const solData = await solResponse.json();\r\n        setSolBalance(solData.balance);\r\n        setPreviousBalance(solData.balance);\r\n\r\n        const splResponse = await fetch(`/splBalances/${account}`);\r\n        const splData = await splResponse.json();\r\n        setSplBalances(splData.filter(token => parseFloat(token.balance) > 0));\r\n      } catch (error) {\r\n        console.error('获取初始余额时出错:', error);\r\n      }\r\n    };\r\n\r\n    fetchBalances();\r\n  }, [account]);\r\n\r\n  // 处理从 WebSocket 接收到的新 SOL 余额\r\n  const handleSolBalanceReceived = useCallback((balance) => {\r\n    if (previousBalance !== null) {\r\n      const change = ((balance - previousBalance) / previousBalance) * 100;\r\n      setPercentageChange(change.toFixed(2));\r\n    }\r\n    setPreviousBalance(balance);\r\n    setSolBalance(balance);\r\n  }, [previousBalance]);\r\n\r\n  // 处理从 WebSocket 接收到的新的 SPL 代币余额\r\n  const handleSPLBalancesReceived = useCallback((balances) => {\r\n    const nonZeroBalances = balances.filter(token => parseFloat(token.balance) > 0);\r\n    setSplBalances(nonZeroBalances);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h2>Solana 帳戶監控</h2>\r\n      </header>\r\n      {/* 引入 WebSocketComponent，并传递必要的属性 */}\r\n      <WebSocketComponent\r\n        account={account}\r\n        onSolBalanceReceived={handleSolBalanceReceived}\r\n        onSPLBalancesReceived={handleSPLBalancesReceived}\r\n      />\r\n      {/* 主体内容 */}\r\n      <div className='dashboard-co'>\r\n        {/* 显示账户地址 */}\r\n        <h2>{account}:</h2>\r\n        <div className='dashboard-bottom-container'>\r\n          {/* 左侧：SOL 余额 */}\r\n          <div className='dashboard_left'>\r\n            <h3>余额: {solBalance} $SOL</h3>\r\n            {percentageChange !== null && (\r\n              <h4 style={{ color: percentageChange > 0 ? 'green' : 'red' }}>\r\n                涨跌: {percentageChange}%\r\n              </h4>\r\n            )}\r\n          </div>\r\n          {/* 右侧：SPL 代币余额 */}\r\n          <div className='dashboard_right'>\r\n            <div className=\"token-grid\">\r\n              {splBalances.map((token, index) => (\r\n                <div key={index} className=\"token-item\" onClick={() => navigator.clipboard.writeText(token.mint)}>\r\n                  <p>TOKEN 合约地址: {token.mint.slice(0, 7)}...{token.mint.slice(-7)}</p>\r\n                  <p>钱包余额: {parseFloat(token.balance).toFixed(4)}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}