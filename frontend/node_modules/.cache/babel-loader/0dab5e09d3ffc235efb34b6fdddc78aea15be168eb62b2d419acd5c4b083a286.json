{"ast":null,"code":"var _s = $RefreshSig$();\n// WebSocketComponent.js\n\nimport React, { useEffect } from 'react';\nconst WebSocketComponent = ({\n  account,\n  onSolBalanceReceived,\n  onSPLBalancesReceived\n}) => {\n  _s();\n  useEffect(() => {\n    // 修改部分：更新 WebSocket 的 URL，添加指定的路徑 `/ws`\n    const ws = new WebSocket('ws://localhost:5001/ws'); // 更新了 URL，添加了 '/ws' 路徑\n\n    ws.onopen = () => {\n      console.log('WebSocket 已連接');\n      // 发送訂閱帳戶更新的請求\n      ws.send(JSON.stringify({\n        action: 'subscribe',\n        account\n      }));\n    };\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'solBalance') {\n        onSolBalanceReceived(parseFloat(data.balance));\n      } else if (data.type === 'splBalances') {\n        onSPLBalancesReceived(data.balances);\n      }\n    };\n    ws.onclose = () => {\n      console.log('WebSocket 已斷開');\n    };\n    return () => {\n      ws.close();\n    };\n  }, [account, onSolBalanceReceived, onSPLBalancesReceived]);\n  return null;\n};\n_s(WebSocketComponent, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = WebSocketComponent;\nexport default WebSocketComponent;\nvar _c;\n$RefreshReg$(_c, \"WebSocketComponent\");","map":{"version":3,"names":["React","useEffect","WebSocketComponent","account","onSolBalanceReceived","onSPLBalancesReceived","_s","ws","WebSocket","onopen","console","log","send","JSON","stringify","action","onmessage","event","data","parse","type","parseFloat","balance","balances","onclose","close","_c","$RefreshReg$"],"sources":["C:/project/sol_track/sol_track_full/frontend/src/WebSocketComponent.js"],"sourcesContent":["// WebSocketComponent.js\r\n\r\nimport React, { useEffect } from 'react';\r\n\r\nconst WebSocketComponent = ({ account, onSolBalanceReceived, onSPLBalancesReceived }) => {\r\n  useEffect(() => {\r\n    // 修改部分：更新 WebSocket 的 URL，添加指定的路徑 `/ws`\r\n    const ws = new WebSocket('ws://localhost:5001/ws'); // 更新了 URL，添加了 '/ws' 路徑\r\n\r\n    ws.onopen = () => {\r\n      console.log('WebSocket 已連接');\r\n      // 发送訂閱帳戶更新的請求\r\n      ws.send(JSON.stringify({ action: 'subscribe', account }));\r\n    };\r\n\r\n    ws.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      if (data.type === 'solBalance') {\r\n        onSolBalanceReceived(parseFloat(data.balance));\r\n      } else if (data.type === 'splBalances') {\r\n        onSPLBalancesReceived(data.balances);\r\n      }\r\n    };\r\n\r\n    ws.onclose = () => {\r\n      console.log('WebSocket 已斷開');\r\n    };\r\n\r\n    return () => {\r\n      ws.close();\r\n    };\r\n  }, [account, onSolBalanceReceived, onSPLBalancesReceived]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default WebSocketComponent;\r\n"],"mappings":";AAAA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAExC,MAAMC,kBAAkB,GAAGA,CAAC;EAAEC,OAAO;EAAEC,oBAAoB;EAAEC;AAAsB,CAAC,KAAK;EAAAC,EAAA;EACvFL,SAAS,CAAC,MAAM;IACd;IACA,MAAMM,EAAE,GAAG,IAAIC,SAAS,CAAC,wBAAwB,CAAC,CAAC,CAAC;;IAEpDD,EAAE,CAACE,MAAM,GAAG,MAAM;MAChBC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;MAC5B;MACAJ,EAAE,CAACK,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;QAAEC,MAAM,EAAE,WAAW;QAAEZ;MAAQ,CAAC,CAAC,CAAC;IAC3D,CAAC;IAEDI,EAAE,CAACS,SAAS,GAAIC,KAAK,IAAK;MACxB,MAAMC,IAAI,GAAGL,IAAI,CAACM,KAAK,CAACF,KAAK,CAACC,IAAI,CAAC;MACnC,IAAIA,IAAI,CAACE,IAAI,KAAK,YAAY,EAAE;QAC9BhB,oBAAoB,CAACiB,UAAU,CAACH,IAAI,CAACI,OAAO,CAAC,CAAC;MAChD,CAAC,MAAM,IAAIJ,IAAI,CAACE,IAAI,KAAK,aAAa,EAAE;QACtCf,qBAAqB,CAACa,IAAI,CAACK,QAAQ,CAAC;MACtC;IACF,CAAC;IAEDhB,EAAE,CAACiB,OAAO,GAAG,MAAM;MACjBd,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED,OAAO,MAAM;MACXJ,EAAE,CAACkB,KAAK,CAAC,CAAC;IACZ,CAAC;EACH,CAAC,EAAE,CAACtB,OAAO,EAAEC,oBAAoB,EAAEC,qBAAqB,CAAC,CAAC;EAE1D,OAAO,IAAI;AACb,CAAC;AAACC,EAAA,CA9BIJ,kBAAkB;AAAAwB,EAAA,GAAlBxB,kBAAkB;AAgCxB,eAAeA,kBAAkB;AAAC,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}