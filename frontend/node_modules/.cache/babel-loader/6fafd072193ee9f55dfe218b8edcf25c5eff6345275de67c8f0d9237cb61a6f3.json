{"ast":null,"code":"var _s = $RefreshSig$();\n// WebSocketComponent.js\n\nimport React, { useEffect } from 'react';\nconst WebSocketComponent = ({\n  account,\n  onSolBalanceReceived,\n  onSPLBalancesReceived\n}) => {\n  _s();\n  useEffect(() => {\n    const ws = new WebSocket('ws://localhost:5001/ws');\n    ws.onopen = () => {\n      console.log('WebSocket 已連接');\n      // 訂閱單個帳號地址\n      if (account) {\n        ws.send(JSON.stringify({\n          action: 'subscribe',\n          account\n        }));\n      } else {\n        console.error('帳號未定義');\n      }\n    };\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'solBalance') {\n        onSolBalanceReceived(parseFloat(data.balance));\n      } else if (data.type === 'splBalances') {\n        onSPLBalancesReceived(data.balances);\n      }\n    };\n    ws.onclose = () => {\n      console.log('WebSocket 已斷開');\n    };\n    return () => {\n      ws.close();\n    };\n  }, [account, onSolBalanceReceived, onSPLBalancesReceived]);\n  return null;\n};\n_s(WebSocketComponent, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = WebSocketComponent;\nexport default WebSocketComponent;\nvar _c;\n$RefreshReg$(_c, \"WebSocketComponent\");","map":{"version":3,"names":["React","useEffect","WebSocketComponent","account","onSolBalanceReceived","onSPLBalancesReceived","_s","ws","WebSocket","onopen","console","log","send","JSON","stringify","action","error","onmessage","event","data","parse","type","parseFloat","balance","balances","onclose","close","_c","$RefreshReg$"],"sources":["/Users/damentp01/project/sol_track_full/frontend/src/WebSocketComponent.js"],"sourcesContent":["// WebSocketComponent.js\n\nimport React, { useEffect } from 'react';\n\nconst WebSocketComponent = ({ account, onSolBalanceReceived, onSPLBalancesReceived }) => {\n  useEffect(() => {\n    const ws = new WebSocket('ws://localhost:5001/ws');\n\n    ws.onopen = () => {\n      console.log('WebSocket 已連接');\n      // 訂閱單個帳號地址\n      if (account) {\n        ws.send(JSON.stringify({ action: 'subscribe', account }));\n      } else {\n        console.error('帳號未定義');\n      }\n    };\n\n    ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'solBalance') {\n        onSolBalanceReceived(parseFloat(data.balance));\n      } else if (data.type === 'splBalances') {\n        onSPLBalancesReceived(data.balances);\n      }\n    };\n\n    ws.onclose = () => {\n      console.log('WebSocket 已斷開');\n    };\n\n    return () => {\n      ws.close();\n    };\n  }, [account, onSolBalanceReceived, onSPLBalancesReceived]);\n\n  return null;\n};\n\nexport default WebSocketComponent;\n"],"mappings":";AAAA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAExC,MAAMC,kBAAkB,GAAGA,CAAC;EAAEC,OAAO;EAAEC,oBAAoB;EAAEC;AAAsB,CAAC,KAAK;EAAAC,EAAA;EACvFL,SAAS,CAAC,MAAM;IACd,MAAMM,EAAE,GAAG,IAAIC,SAAS,CAAC,wBAAwB,CAAC;IAElDD,EAAE,CAACE,MAAM,GAAG,MAAM;MAChBC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;MAC5B;MACA,IAAIR,OAAO,EAAE;QACXI,EAAE,CAACK,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;UAAEC,MAAM,EAAE,WAAW;UAAEZ;QAAQ,CAAC,CAAC,CAAC;MAC3D,CAAC,MAAM;QACLO,OAAO,CAACM,KAAK,CAAC,OAAO,CAAC;MACxB;IACF,CAAC;IAEDT,EAAE,CAACU,SAAS,GAAIC,KAAK,IAAK;MACxB,MAAMC,IAAI,GAAGN,IAAI,CAACO,KAAK,CAACF,KAAK,CAACC,IAAI,CAAC;MACnC,IAAIA,IAAI,CAACE,IAAI,KAAK,YAAY,EAAE;QAC9BjB,oBAAoB,CAACkB,UAAU,CAACH,IAAI,CAACI,OAAO,CAAC,CAAC;MAChD,CAAC,MAAM,IAAIJ,IAAI,CAACE,IAAI,KAAK,aAAa,EAAE;QACtChB,qBAAqB,CAACc,IAAI,CAACK,QAAQ,CAAC;MACtC;IACF,CAAC;IAEDjB,EAAE,CAACkB,OAAO,GAAG,MAAM;MACjBf,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED,OAAO,MAAM;MACXJ,EAAE,CAACmB,KAAK,CAAC,CAAC;IACZ,CAAC;EACH,CAAC,EAAE,CAACvB,OAAO,EAAEC,oBAAoB,EAAEC,qBAAqB,CAAC,CAAC;EAE1D,OAAO,IAAI;AACb,CAAC;AAACC,EAAA,CAjCIJ,kBAAkB;AAAAyB,EAAA,GAAlBzB,kBAAkB;AAmCxB,eAAeA,kBAAkB;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}